<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Intro</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="/static/style.css" >

<script>
function toggleTOC() {
    const content = document.getElementById('text-table-of-contents');
    const icon = document.querySelector('.toggle-icon');

    if (content && icon) {
        content.classList.toggle('expanded');
        icon.classList.toggle('expanded');
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const content = document.getElementById('text-table-of-contents');
    const icon = document.querySelector('.toggle-icon');

    if (content && icon) {
        content.classList.remove('expanded');
        icon.classList.remove('expanded');
    }
});
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Intro</h1>
<div id="table-of-contents" role="doc-toc">
<h2 onclick="toggleTOC()">Table of Contents<span class="toggle-icon">â–¼</span></h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org35274fa">History</a></li>
<li><a href="#org07cf17e">Software tools principles</a>
<ul>
<li><a href="#org8e46d13">Do one thing well</a></li>
<li><a href="#org0b35164">Process lines of text, not binary</a></li>
<li><a href="#orgbca93d4">Use Regular Expressions</a></li>
<li><a href="#org820723f">Default to std in/out</a></li>
<li><a href="#orgfda61e5">Don't be chatty</a></li>
<li><a href="#org7d7d5ab">Use the input format for output</a></li>
<li><a href="#org76bbebc">Let someone else do the hard part</a></li>
<li><a href="#orgb2beeab">Detour to write specilized tools</a></li>
</ul>
</li>
<li><a href="#org249ff9a">Self contained scripts</a>
<ul>
<li><a href="#org3b880e1">Creating a script</a>
<ul>
<li><a href="#org5bc1407">understand tools you can use</a></li>
<li><a href="#orgb5aefb2">write it</a></li>
<li><a href="#org954ac51">make it executable</a></li>
<li><a href="#org216ba31">run!</a></li>
<li><a href="#orgfa20b63">Lets change our script</a></li>
</ul>
</li>
<li><a href="#orga81ce69">How simple script works</a></li>
<li><a href="#org02ca662">Interpreter in a script</a></li>
<li><a href="#org2ac375a"><code>man</code> and <code>help</code></a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org35274fa" class="outline-2">
<h2 id="org35274fa">History</h2>
<div class="outline-text-2" id="text-org35274fa">
<ul class="org-ul">
<li>shell scripting was deved in the context of UNIX from Bell Labs</li>
<li>research-oriented, no pressure to ship product</li>
<li>UNIX devs were the users
<ul class="org-ul">
<li>deved to solve their problems</li>
<li>freedom to experiment and rewrite as needed</li>
</ul></li>
<li>no-nonsense, users were computer scientists</li>
<li>besides functionality, quest for <i>elegance</i></li>
</ul>

<p>
The not-so-good:
</p>
<ul class="org-ul">
<li>utilities were often incosistent</li>
<li>a leading minus for options was not always used (<code>tar</code>)</li>
<li>different regex syntax</li>
<li>documentation often too terse</li>
</ul>

<p>
Small history:
</p>
<ul class="org-ul">
<li>1970-1976: Thompson Shell</li>
<li>1975: Mashey Shell for PWB UNIX</li>
<li>1977: <b>Bourne Shell</b> for V7 UNIX</li>
<li>1979: Berkly C-Shell (csh)</li>
<li>1986-1993 and on: Korn Shell (ksh86, ksh88, ksh93)</li>
<li>1988 and on: <b>GNU Bash</b> (Bourne Again Shell)</li>
<li>many other Bourne Shell clones in the wild</li>
<li><b>POSIX Shell Standard</b>: 1992 and ongoing</li>
</ul>
</div>
</div>
<div id="outline-container-org07cf17e" class="outline-2">
<h2 id="org07cf17e">Software tools principles</h2>
<div class="outline-text-2" id="text-org07cf17e">
<ul class="org-ul">
<li>programs should be specialized tools
<ul class="org-ul">
<li>avoid "one program to urle them all"</li>
</ul></li>
<li>combining tools (with pipelines and shell "glue" code) often gets the job done wihtout having to write a new full program</li>
<li>popularized in the Kerninghan &amp; Plauger books</li>
</ul>
</div>
<div id="outline-container-org8e46d13" class="outline-3">
<h3 id="org8e46d13">Do one thing well</h3>
<div class="outline-text-3" id="text-org8e46d13">
<p>
Programs are easier to:
</p>
<ul class="org-ul">
<li>write and get correct</li>
<li>document</li>
<li>understand and use</li>
</ul>

<p>
Examples:
</p>
<ul class="org-ul">
<li><code>cat</code> (the original) only concatenated files</li>
<li><code>cp</code> copies files, <code>mv</code> moves and renames them - they are 2 different programs</li>
<li>contrast to VMS COPY command: creates new file from one or more existing files; copy input file to output file; concatenate 2 or more input files into single output file; copy a group of input files ot a group of output files;</li>
</ul>
</div>
</div>
<div id="outline-container-org0b35164" class="outline-3">
<h3 id="org0b35164">Process lines of text, not binary</h3>
<div class="outline-text-3" id="text-org0b35164">
<ul class="org-ul">
<li>easy to process with existing and new tools</li>
<li>can be edited with any text editor</li>
<li>portable accross networks and machine archs</li>
</ul>

<p>
Example: list of unique login names
</p>
<div class="org-src-container">
<pre class="src src-bash">who | awk <span style="font-style: italic;">'{print $1}'</span> | sort | uniq
</pre>
</div>

<pre class="example">
nasreddin
</pre>
</div>
</div>
<div id="outline-container-orgbca93d4" class="outline-3">
<h3 id="orgbca93d4">Use Regular Expressions</h3>
<div class="outline-text-3" id="text-orgbca93d4">
<p>
Provide powerful text matching and substitution
</p>

<p>
2 flavors standardized by POSIX:
</p>
<ul class="org-ul">
<li><b>Basic Regual Expressions (BREs)</b>: <code>grep</code>, <code>sed</code>, &#x2026;</li>
<li><b>Extended Regular Expressions (EREs)</b>: <code>egrep</code>, <code>awk</code>, &#x2026;</li>
</ul>

<p>
Example:
</p>
<div class="org-src-container">
<pre class="src src-bash">who | sed <span style="font-style: italic;">'s/[^[:alnum:]].*//'</span> | sort | uniq
</pre>
</div>

<pre class="example">
nasreddin
</pre>


<p>
(often more than one way to do things)
</p>
</div>
</div>
<div id="outline-container-org820723f" class="outline-3">
<h3 id="org820723f">Default to std in/out</h3>
<div class="outline-text-3" id="text-org820723f">
<p>
When no files are named on the command line, use std in and out
</p>

<ul class="org-ul">
<li>simplifies writing programs</li>
<li>lets you hook programs together with pipelines</li>
<li>encourages programs to do one thing well</li>
</ul>

<p>
Such programs are called "<b>filters</b>" (by analogy to water pipelines)
</p>
</div>
</div>
<div id="outline-container-orgfda61e5" class="outline-3">
<h3 id="orgfda61e5">Don't be chatty</h3>
<div class="outline-text-3" id="text-orgfda61e5">
<ul class="org-ul">
<li>status messages mixed with output can only confuse downstream programs</li>
<li>you asked for it, you got it (no "are you sure?")</li>
</ul>
</div>
</div>
<div id="outline-container-org7d7d5ab" class="outline-3">
<h3 id="org7d7d5ab">Use the input format for output</h3>
<div class="outline-text-3" id="text-org7d7d5ab">
<p>
If your text is structured, after processing, write the same format for output as you read for input.
(this is something of a later principle adopted by the community)
</p>

<ul class="org-ul">
<li>allows to build <b>specialized tools that work together</b></li>
</ul>

<p>
Example: The Portable Network Graphics (PNG) suite:
</p>
<div class="org-src-container">
<pre class="src src-bash">pngtopnm x.png | pnmflip -leftright | ppnmrotate 45 | pnmtopng &gt; y.png
</pre>
</div>
</div>
</div>
<div id="outline-container-org76bbebc" class="outline-3">
<h3 id="org76bbebc">Let someone else do the hard part</h3>
<div class="outline-text-3" id="text-org76bbebc">
<ul class="org-ul">
<li>use existing tools to select data (<code>grep</code>, <code>awk</code>, &#x2026;)</li>
<li>sort it, if that makes sense</li>
<li>if necessary, write a specialized tool to finish the job</li>
</ul>
</div>
</div>
<div id="outline-container-orgb2beeab" class="outline-3">
<h3 id="orgb2beeab">Detour to write specilized tools</h3>
<div class="outline-text-3" id="text-orgb2beeab">
<ul class="org-ul">
<li>sometimes, there is no existing too, so write it!</li>
<li>but, stop and think:
<ul class="org-ul">
<li>is what you want to do useful to others?</li>
<li>can it be generalized?</li>
</ul></li>
<li>if so, try to design and write it as a <b>general purpose tool</b></li>
<li>ofter, you can use a scripting language to write your tool, be it Awk, Perl, Python, Ruby, or shell!</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org249ff9a" class="outline-2">
<h2 id="org249ff9a">Self contained scripts</h2>
<div class="outline-text-2" id="text-org249ff9a">
</div>
<div id="outline-container-org3b880e1" class="outline-3">
<h3 id="org3b880e1">Creating a script</h3>
<div class="outline-text-3" id="text-org3b880e1">
<p>
Lets say we want to count the number of login sessions on our computer&#x2026; (here there's just me)
</p>
</div>
<div id="outline-container-org5bc1407" class="outline-4">
<h4 id="org5bc1407">understand tools you can use</h4>
<div class="outline-text-4" id="text-org5bc1407">
<ul class="org-ul">
<li><code>who</code> allows us to see who is logged in:</li>
</ul>

<div class="org-src-container">
<pre class="src src-bash">who
</pre>
</div>

<pre class="example">
nasreddin tty7         2025-08-18 18:34 (:0)
nasreddin pts/1        2025-08-18 18:34 (tmux(1307).%0)
</pre>


<ul class="org-ul">
<li><code>wc</code> allows us to count words but also lines!</li>
</ul>
<div class="org-src-container">
<pre class="src src-bash">ls | wc -l
</pre>
</div>

<pre class="example">
2
</pre>
</div>
</div>
<div id="outline-container-orgb5aefb2" class="outline-4">
<h4 id="orgb5aefb2">write it</h4>
<div class="outline-text-4" id="text-orgb5aefb2">
<p>
Use a text editor and save it to a file.
</p>

<p>
Using <code>who</code> and <code>wc</code>, we can:
</p>
<div class="org-src-container">
<pre class="src src-bash">who | wc -l
</pre>
</div>

<pre class="example">
2
</pre>


<p>
Lets save that to a file:
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="font-weight: bold;">echo</span> <span style="font-style: italic;">"who | wc -l"</span> &gt; scripts/nusers
</pre>
</div>
</div>
</div>
<div id="outline-container-org954ac51" class="outline-4">
<h4 id="org954ac51">make it executable</h4>
<div class="outline-text-4" id="text-org954ac51">
<div class="org-src-container">
<pre class="src src-bash">chmod +x ./scripts/nusers
</pre>
</div>
</div>
</div>
<div id="outline-container-org216ba31" class="outline-4">
<h4 id="org216ba31">run!</h4>
<div class="outline-text-4" id="text-org216ba31">
<div class="org-src-container">
<pre class="src src-bash">./scripts/nusers
</pre>
</div>

<pre class="example">
3
</pre>
</div>
</div>
<div id="outline-container-orgfa20b63" class="outline-4">
<h4 id="orgfa20b63">Lets change our script</h4>
<div class="outline-text-4" id="text-orgfa20b63">
<p>
We can enhance it by printing <b>unique</b> logged in users
</p>

<p>
We can edit the file using any text editor&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-bash">who | awk <span style="font-style: italic;">'{print $1}'</span> | uniq | wc -l
</pre>
</div>

<pre class="example">
1
</pre>


<p>
Now we see that there is only me logged in
</p>
</div>
</div>
</div>
<div id="outline-container-orga81ce69" class="outline-3">
<h3 id="orga81ce69">How simple script works</h3>
<div class="outline-text-3" id="text-orga81ce69">

<div id="orgb426f00" class="figure">
<p><img src="../static/intro/script_execution_diagram.png" alt="script_execution_diagram.png">
</p>
</div>

<ol class="org-ol">
<li>You type the command in the parent shell</li>
<li>Parent shell forks to a child shell and child shell tries to run the command with <code>exec</code></li>
<li>If the command fails (it's not a binary), child shell assumes that the command must be script and runs it</li>
<li>When it's done, it exists to the parent shell</li>
</ol>
</div>
</div>
<div id="outline-container-org02ca662" class="outline-3">
<h3 id="org02ca662">Interpreter in a script</h3>
<div class="outline-text-3" id="text-org02ca662">
<p>
Shell scripts can be as simple text files containing shell scripts.
</p>

<p>
But <b>this only works if the script is in the same language as your interactive shell</b>
</p>

<ul class="org-ul">
<li>Binary executables start with a "magic number" indicating the type of object file</li>
<li>Executable scripts start with a textual "magic number": <code>#!</code></li>
<li>The full format: <code>#!/path/to/interpreter [&lt;one_argument&gt;]</code></li>
<li>One optional argument may be supplied</li>
<li>Some systems have small limits on the path name length</li>
</ul>
</div>
</div>
<div id="outline-container-org2ac375a" class="outline-3">
<h3 id="org2ac375a"><code>man</code> and <code>help</code></h3>
<div class="outline-text-3" id="text-org2ac375a">
<p>
These are our friends in learning shell scripting.
</p>

<ul class="org-ul">
<li><code>help [COMMAND]</code> displays a help page for <b>built-in bash commands</b></li>
<li><code>man [COMMAND]</code> diplays a manual for <b>system utilities</b></li>
</ul>
</div>
</div>
</div>
</div>
</body>
</html>
